{"version":3,"sources":["components/Game/Dashboard/Box/styles.module.css","components/Game/styles.module.css","components/Game/Dashboard/styles.module.css","components/Game/Status/styles.module.css","components/Game/Controls/styles.module.css","components/Settings/styles.module.css","reducers/game/dashboard.js","reducers/game/index.js","actions/types.js","reducers/game/hidden.js","reducers/game/status.js","reducers/index.js","store.js","utils/dashboard.js","components/Game/Controls/index.js","components/Game/Dashboard/Box/index.js","components/Game/Dashboard/index.js","components/Game/Status/index.js","components/Game/index.js","actions/game.js","components/Settings/index.js","App.js","index.js","App.module.css"],"names":["module","exports","container","flagged","hidden","mined","visible","status","dashboard","row","over","won","updateBoxes","state","boxIds","update","boxes","updatedBoxes","forEach","id","Object","objectSpread","combineReducers","arguments","length","undefined","action","type","payload","boxId","game","store","createStore","rootReducer","serialized","localStorage","getItem","JSON","parse","err","loadState","composeWithDevTools","subscribe","throttle","stringify","setItem","console","error","saveState","getState","reshapeArray","array","shape","reshaped","n","push","slice","utils_dashboard","rows","mines","random","Math","grid","random2d","adjacents","adj","map","clast","rlast","r","c","_adj$r$c","_adj$c","apply","concat","toConsumableArray","getAdjacents","sort","a","b","bottomLim","_","getMined","adjacentMinesCount","keys","reduce","count","adjacentId","Number","createBoxes","Controls","props","react_default","createElement","className","styles","onClick","onNewGame","Box","pressTimer","createPressTimer","_this$props","_this","toggleBoxFlag","setTimeout","clearPressTimer","clearTimeout","handleClick","handleContextMenu","event","preventDefault","handleMouseDown","button","_this$props2","this","box","listening","assign","onContextMenu","onMouseDown","onMouseUp","onTouchEnd","onTouchStart","children","getBoxProperties","React","Component","connect","ownProps","Dashboard","onBoxClick","index","key","Dashboard_Box","defaultProps","messages","active","Status","_ref","Game","createNewGame","createGame","handleBoxClick","showBoxes","loseGame","recursiveBoxIds","unflagBox","flagBox","winGame","seed","_this2","reduction","includes","_this$props$game","Game_Dashboard","mapDispatch","createDashboard","flags","Settings","App","content","settings","components_Game","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4528b9a9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__xYc4E\",\"flagged\":\"styles_flagged__3oln8 styles_container__xYc4E\",\"hidden\":\"styles_hidden__heXTG styles_container__xYc4E\",\"mined\":\"styles_mined__1V6BN styles_container__xYc4E\",\"visible\":\"styles_visible__2StxM styles_container__xYc4E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3vvuG\",\"status\":\"styles_status__3jW60\",\"dashboard\":\"styles_dashboard__1Lg5i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__TO3ks\",\"row\":\"styles_row__3vohk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3rjrK\",\"over\":\"styles_over__3Jfd_ styles_container__3rjrK\",\"won\":\"styles_won__2T2a_ styles_container__3rjrK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1o41C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__24bXF\"};","import * as actionTypes from '../../actions/types';\r\n\r\nfunction updateBoxes(state, boxIds, update) {\r\n  const { boxes } = state;\r\n  const updatedBoxes = {};\r\n\r\n  boxIds.forEach((id) => {\r\n    updatedBoxes[id] = { ...boxes[id], ...update };\r\n  });\r\n\r\n  return {\r\n    ...state,\r\n    boxes: { ...boxes, ...updatedBoxes },\r\n  };\r\n}\r\n\r\nexport default (state = null, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CREATE_GAME:\r\n      return { ...action.payload.dashboard };\r\n    case actionTypes.FLAG_BOX:\r\n      return updateBoxes(state, [action.payload.boxId], { flagged: true });\r\n    case actionTypes.SHOW_BOXES:\r\n      return updateBoxes(state, action.payload.boxIds, { visible: true });\r\n    case actionTypes.UNFLAG_BOX:\r\n      return updateBoxes(state, [action.payload.boxId], { flagged: false });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport dashboard from './dashboard';\r\nimport hidden from './hidden';\r\nimport status from './status';\r\n\r\nexport default combineReducers({\r\n  dashboard,\r\n  hidden,\r\n  status,\r\n});\r\n","export const CREATE_GAME = 'CREATE_GAME';\r\nexport const LOSE_GAME = 'LOSE_GAME';\r\nexport const FLAG_BOX = 'FLAG_BOX';\r\nexport const SHOW_BOXES = 'SHOW_BOXES';\r\nexport const UNFLAG_BOX = 'UNFLAG_BOX';\r\nexport const WIN_GAME = 'WIN_GAME';\r\n","import * as actionTypes from '../../actions/types';\r\n\r\nexport default (state = null, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CREATE_GAME:\r\n      return action.payload.hidden;\r\n    case actionTypes.SHOW_BOXES:\r\n      return state - action.payload.boxIds.length;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import * as actionTypes from '../../actions/types';\r\n\r\nexport default (state = '', action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CREATE_GAME:\r\n      return 'active';\r\n    case actionTypes.LOSE_GAME:\r\n      return 'over';\r\n    case actionTypes.WIN_GAME:\r\n      return 'won';\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport game from './game';\r\n\r\nexport default combineReducers({\r\n  game,\r\n});\r\n","import { createStore } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport throttle from 'lodash.throttle';\r\nimport rootReducer from './reducers';\r\n\r\nconst loadState = () => {\r\n  try {\r\n    const serialized = localStorage.getItem('state');\r\n\r\n    if (!serialized) {\r\n      return undefined;\r\n    }\r\n\r\n    return JSON.parse(serialized);\r\n  } catch (err) {\r\n    return undefined;\r\n  }\r\n};\r\nconst saveState = (state) => {\r\n  try {\r\n    const serialized = JSON.stringify(state);\r\n\r\n    localStorage.setItem('state', serialized);\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\nconst store = createStore(\r\n  rootReducer,\r\n  loadState(),\r\n  composeWithDevTools(),\r\n);\r\n\r\nstore.subscribe(throttle(() => saveState(store.getState()), 1000));\r\n\r\nexport default store;\r\n","function reshapeArray(array, shape) {\r\n  const reshaped = [];\r\n\r\n  for (let n = 0; n < shape[0]; n++) {\r\n    reshaped.push(array.slice(n * shape[1], (n + 1) * shape[1]));\r\n  }\r\n\r\n  return reshaped;\r\n}\r\n\r\nfunction createBoxes(shape, grid, adjacents, mined) {\r\n  const boxes = {};\r\n\r\n  for (let r = 0; r < shape[0]; r++) {\r\n    for (let c = 0; c < shape[1]; c++) {\r\n      const id = grid[r][c];\r\n\r\n      boxes[id] = {\r\n        adjacents: adjacents[r][c],\r\n        adjacentMinesCount: 0,\r\n        flagged: false,\r\n        id,\r\n        mined: mined[r][c],\r\n        visible: false,\r\n      };\r\n    }\r\n  }\r\n\r\n  Object.keys(boxes).forEach((id) => {\r\n    boxes[id].adjacentMinesCount = boxes[id].adjacents.reduce((\r\n      count,\r\n      adjacentId,\r\n    ) => count + Number(boxes[adjacentId].mined), 0);\r\n  });\r\n\r\n  return boxes;\r\n}\r\n\r\nfunction getAdjacents(shape, grid) {\r\n  const adj = grid.map(row => row.map(() => []));\r\n  const clast = shape[1] - 1;\r\n  const rlast = shape[0] - 1;\r\n\r\n  for (let r = 0; r < rlast; r++) {\r\n    for (let c = 0; c < clast; c++) {\r\n      adj[r][c].push(grid[r][c + 1], ...grid[r + 1].slice(c, c + 2));\r\n      adj[r][c + 1].push(grid[r][c], grid[r + 1][c]);\r\n      adj[r + 1][c].push(...grid[r].slice(c, c + 2));\r\n      adj[r + 1][c + 1].push(grid[r][c]);\r\n    }\r\n    adj[r][clast].push(grid[r + 1][clast]);\r\n    adj[r + 1][clast].push(grid[r][clast]);\r\n  }\r\n  for (let c = 0; c < clast; c++) {\r\n    adj[rlast][c].push(grid[rlast][c + 1]);\r\n    adj[rlast][c + 1].push(grid[rlast][c]);\r\n  }\r\n\r\n  return adj;\r\n}\r\n\r\nfunction getMined(random, random2d, grid, mines) {\r\n  random.sort((a, b) => b - a); // descending order\r\n\r\n  const bottomLim = random[mines];\r\n\r\n  return grid.map((row, r) => row.map((_, c) => random2d[r][c] > bottomLim));\r\n}\r\n\r\nexport default (length, rows, mines) => {\r\n  const boxIds = [];\r\n  const random = [];\r\n  const shape = [rows, length / rows];\r\n\r\n  for (let n = 0; n < length; n++) {\r\n    boxIds.push(n);\r\n    random.push(Math.random());\r\n  }\r\n\r\n  const grid = reshapeArray(boxIds, shape);\r\n  const random2d = reshapeArray(random, shape);\r\n\r\n  const adjacents = getAdjacents(shape, grid);\r\n  const mined = getMined(random, random2d, grid, mines);\r\n  const boxes = createBoxes(shape, grid, adjacents, mined);\r\n\r\n  return { boxes, grid, length, mines, shape };\r\n};\r\n","import React from 'react';\r\nimport styles from './styles.module.css';\r\n\r\nexport default props => (\r\n  <div className={styles.container} onClick={props.onNewGame}>\r\n    New game\r\n  </div>\r\n);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport styles from './styles.module.css';\r\n\r\nfunction getBoxProperties(box) {\r\n  if (box.mined && box.visible) {\r\n    return {\r\n      className: styles.mined,\r\n      children: <i className=\"fas fa-bomb\" />,\r\n    };\r\n  }\r\n\r\n  if (box.visible) {\r\n    const { adjacentMinesCount: mines } = box;\r\n\r\n    return {\r\n      className: styles.visible,\r\n      children: (mines > 0) && mines,\r\n    };\r\n  }\r\n\r\n  if (box.flagged) {\r\n    return {\r\n      className: styles.flagged,\r\n      children: <i className=\"fas fa-flag\" />,\r\n    };\r\n  }\r\n\r\n  return { className: styles.hidden };\r\n}\r\n\r\nclass Box extends React.Component {\r\n  pressTimer = null;\r\n\r\n  createPressTimer = () => {\r\n    const { boxId, toggleBoxFlag } = this.props;\r\n\r\n    this.pressTimer = setTimeout(() => toggleBoxFlag(boxId), 600);\r\n  }\r\n\r\n  clearPressTimer = () => {\r\n    if (this.pressTimer) {\r\n      clearTimeout(this.pressTimer);\r\n      this.pressTimer = null;\r\n    }\r\n  }\r\n\r\n  handleClick = () => this.props.onClick(this.props.boxId);\r\n\r\n  handleContextMenu = event => event.preventDefault();\r\n\r\n  handleMouseDown = (event) => {\r\n    if (event.button === 2) {\r\n      this.props.toggleBoxFlag(this.props.boxId);\r\n      return;\r\n    }\r\n\r\n    this.createPressTimer();\r\n  }\r\n\r\n  render() {\r\n    const { box, onClick, toggleBoxFlag } = this.props;\r\n    const listening = !box.visible && toggleBoxFlag;\r\n\r\n    return (\r\n      <div\r\n        onClick={onClick ? this.handleClick : undefined}\r\n        onContextMenu={this.handleContextMenu}\r\n        onMouseDown={listening ? this.handleMouseDown : undefined}\r\n        onMouseUp={listening ? this.clearPressTimer : undefined}\r\n        onTouchEnd={listening ? this.clearPressTimer : undefined}\r\n        onTouchStart={listening ? this.createPressTimer : undefined}\r\n        {...getBoxProperties(box)}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state, ownProps) => ({\r\n  box: state.game.dashboard.boxes[ownProps.boxId],\r\n});\r\n\r\nexport default connect(mapState)(Box);\r\n","import React from 'react';\r\n\r\nimport styles from './styles.module.css';\r\nimport Box from './Box';\r\n\r\nconst Dashboard = (props) => {\r\n  const { dashboard, onBoxClick, toggleBoxFlag } = props;\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {dashboard && dashboard.grid.map((row, index) => (\r\n        <div className={styles.row} key={index}>\r\n          {row.map(id => (\r\n            <Box\r\n              key={id}\r\n              boxId={id}\r\n              onClick={onBoxClick}\r\n              toggleBoxFlag={toggleBoxFlag}\r\n            />\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nDashboard.defaultProps = {\r\n  dashboard: null,\r\n};\r\n\r\nexport default Dashboard;\r\n","import React from 'react';\r\nimport styles from './styles.module.css';\r\n\r\nconst messages = {\r\n  active: '',\r\n  over: 'You clicked a mine! Game is over :( Start a new game!',\r\n  won: 'You passed over all mines! :) Start a new game!',\r\n};\r\n\r\nexport default ({ status }) => (\r\n  <div className={status in styles ? styles[status] : ''}>\r\n    {status in messages ? messages[status] : 'Game status'}\r\n  </div>\r\n);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as gameActions from '../../actions/game';\r\n\r\nimport styles from './styles.module.css';\r\nimport Controls from './Controls';\r\nimport Dashboard from './Dashboard';\r\nimport Status from './Status';\r\n\r\nclass Game extends React.Component {\r\n  componentDidMount() {\r\n    if (this.props.game.status.length === 0) {\r\n      this.createNewGame();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { game } = this.props;\r\n    const { dashboard, hidden } = game;\r\n\r\n    if (game.status !== 'active') {\r\n      return;\r\n    }\r\n\r\n    if (dashboard.mines === hidden) {\r\n      this.props.winGame();\r\n    }\r\n  }\r\n\r\n  createNewGame = () => {\r\n    this.props.createGame(20, 5, 8);\r\n  }\r\n\r\n  handleBoxClick = (boxId) => {\r\n    const { boxes } = this.props;\r\n\r\n    if (boxes[boxId].flagged) {\r\n      return;\r\n    }\r\n\r\n    if (boxes[boxId].mined) {\r\n      this.props.showBoxes([boxId]);\r\n      this.props.loseGame();\r\n      return;\r\n    }\r\n\r\n    this.props.showBoxes(this.recursiveBoxIds([], boxId));\r\n  };\r\n\r\n  toggleBoxFlag = (boxId) => {\r\n    const box = this.props.boxes[boxId];\r\n\r\n    if (box.flagged) {\r\n      this.props.unflagBox(boxId);\r\n      return;\r\n    }\r\n\r\n    this.props.flagBox(boxId);\r\n  }\r\n\r\n  recursiveBoxIds(array, seed) {\r\n    const { boxes } = this.props;\r\n\r\n    array.push(seed);\r\n\r\n    return boxes[seed].adjacents.reduce((reduction, id) => (\r\n      (\r\n        boxes[id].mined\r\n        || boxes[id].visible\r\n        || reduction.includes(id)\r\n      ) ? reduction : this.recursiveBoxIds(reduction, id)\r\n    ), array);\r\n  }\r\n\r\n  render() {\r\n    const { dashboard, status } = this.props.game;\r\n    const active = status === 'active';\r\n    const onBoxClick = active ? this.handleBoxClick : undefined;\r\n    const toggleBoxFlag = active ? this.toggleBoxFlag : undefined;\r\n\r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.status}>\r\n          <p>Click/Press to open a box</p>\r\n          <p>Long click/press or right click to flag/unflag a box</p>\r\n          <Controls onNewGame={this.createNewGame}/>\r\n          <Status status={status} />\r\n        </div>\r\n        <div className={styles.dashboard}>\r\n          <Dashboard\r\n            dashboard={dashboard}\r\n            onBoxClick={onBoxClick}\r\n            toggleBoxFlag={toggleBoxFlag}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = state => ({\r\n  boxes: state.game.dashboard && state.game.dashboard.boxes,\r\n  game: state.game,\r\n});\r\nconst mapDispatch = ({\r\n  createGame: gameActions.create,\r\n  flagBox: gameActions.flagBox,\r\n  loseGame: gameActions.loseGame,\r\n  showBoxes: gameActions.showBoxes,\r\n  unflagBox: gameActions.unflagBox,\r\n  winGame: gameActions.winGame,\r\n});\r\n\r\nexport default connect(mapState, mapDispatch)(Game);\r\n","import * as actionTypes from './types';\r\nimport createDashboard from '../utils/dashboard';\r\n\r\nexport const create = (length, rows, mines) => {\r\n  const dashboard = createDashboard(length, rows, mines);\r\n\r\n  return {\r\n    type: actionTypes.CREATE_GAME,\r\n    payload: { dashboard, flags: 0, hidden: length },\r\n  };\r\n};\r\n\r\nexport const flagBox = boxId => ({\r\n  type: actionTypes.FLAG_BOX,\r\n  payload: { boxId },\r\n});\r\n\r\nexport const loseGame = () => ({\r\n  type: actionTypes.LOSE_GAME,\r\n});\r\n\r\nexport const showBoxes = boxIds => ({\r\n  type: actionTypes.SHOW_BOXES,\r\n  payload: { boxIds },\r\n});\r\n\r\nexport const unflagBox = boxId => ({\r\n  type: actionTypes.UNFLAG_BOX,\r\n  payload: { boxId },\r\n});\r\n\r\nexport const winGame = () => ({\r\n  type: actionTypes.WIN_GAME,\r\n});\r\n","import React from 'react';\r\nimport styles from './styles.module.css';\r\n\r\nexport default () => (\r\n  <div className={styles.container}>Settings</div>\r\n);\r\n","import React, { Component } from 'react';\r\nimport styles from './App.module.css';\r\nimport Game from './components/Game';\r\nimport Settings from './components/Settings';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.container}>\r\n        <header>\r\n          <h1>Minesweeper</h1>\r\n        </header>\r\n        <main className={styles.content}>\r\n          <div className={styles.settings}>\r\n            <Settings />\r\n          </div>\r\n          <div className={styles.game}>\r\n            <Game />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__AVaq6\",\"content\":\"App_content__1KDwk\",\"settings\":\"App_settings__3ywE_\",\"game\":\"App_game__-kgPd\"};"],"sourceRoot":""}