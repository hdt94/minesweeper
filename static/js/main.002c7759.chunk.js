(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports={container:"styles_container__xYc4E",flagged:"styles_flagged__3oln8 styles_container__xYc4E",hidden:"styles_hidden__heXTG styles_container__xYc4E",mined:"styles_mined__1V6BN styles_container__xYc4E",visible:"styles_visible__2StxM styles_container__xYc4E"}},13:function(e,t,n){e.exports={container:"styles_container__3vvuG",status:"styles_status__3jW60",dashboard:"styles_dashboard__1Lg5i"}},16:function(e,t,n){e.exports={container:"styles_container__TO3ks",row:"styles_row__3vohk"}},17:function(e,t,n){e.exports={container:"styles_container__3rjrK",over:"styles_over__3Jfd_ styles_container__3rjrK",won:"styles_won__2T2a_ styles_container__3rjrK"}},26:function(e,t,n){e.exports={container:"styles_container__1o41C"}},27:function(e,t,n){e.exports={container:"styles_container__24bXF"}},28:function(e,t,n){e.exports=n(45)},36:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),s=n.n(o),c=n(6),i=n(2),l=n(24),u=n(25),d=n.n(u),p=n(11);function f(e,t,n){var a=e.boxes,r={};return t.forEach(function(e){r[e]=Object(p.a)({},a[e],n)}),Object(p.a)({},e,{boxes:Object(p.a)({},a,r)})}var m=Object(i.combineReducers)({dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_GAME":return Object(p.a)({},t.payload.dashboard);case"FLAG_BOX":return f(e,[t.payload.boxId],{flagged:!0});case"SHOW_BOXES":return f(e,t.payload.boxIds,{visible:!0});case"UNFLAG_BOX":return f(e,[t.payload.boxId],{flagged:!1});default:return e}},hidden:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_GAME":return t.payload.hidden;case"SHOW_BOXES":return e-t.payload.boxIds.length;default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CREATE_GAME":return"active";case"LOSE_GAME":return"over";case"WIN_GAME":return"won";default:return e}}}),h=Object(i.combineReducers)({game:m}),_=Object(i.createStore)(h,function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(t){return}}(),Object(l.composeWithDevTools)());_.subscribe(d()(function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.error(n)}}(_.getState())},1e3));var v=_,b=(n(36),n(3)),g=n(4),x=n(7),y=n(5),E=n(8),O=n(9),j=n.n(O),w=n(18);function N(e,t){for(var n=[],a=0;a<t[0];a++)n.push(e.slice(a*t[1],(a+1)*t[1]));return n}var B=function(e,t,n){for(var a=[],r=[],o=[t,e/t],s=0;s<e;s++)a.push(s),r.push(Math.random());var c=N(a,o),i=N(r,o),l=function(e,t){for(var n=t.map(function(e){return e.map(function(){return[]})}),a=e[1]-1,r=e[0]-1,o=0;o<r;o++){for(var s=0;s<a;s++){var c,i;(c=n[o][s]).push.apply(c,[t[o][s+1]].concat(Object(w.a)(t[o+1].slice(s,s+2)))),n[o][s+1].push(t[o][s],t[o+1][s]),(i=n[o+1][s]).push.apply(i,Object(w.a)(t[o].slice(s,s+2))),n[o+1][s+1].push(t[o][s])}n[o][a].push(t[o+1][a]),n[o+1][a].push(t[o][a])}for(var l=0;l<a;l++)n[r][l].push(t[r][l+1]),n[r][l+1].push(t[r][l]);return n}(o,c),u=function(e,t,n,a){e.sort(function(e,t){return t-e});var r=e[a];return n.map(function(e,n){return e.map(function(e,a){return t[n][a]>r})})}(r,i,c,n);return{boxes:function(e,t,n,a){for(var r={},o=0;o<e[0];o++)for(var s=0;s<e[1];s++){var c=t[o][s];r[c]={adjacents:n[o][s],adjacentMinesCount:0,flagged:!1,id:c,mined:a[o][s],visible:!1}}return Object.keys(r).forEach(function(e){r[e].adjacentMinesCount=r[e].adjacents.reduce(function(e,t){return e+Number(r[t].mined)},0)}),r}(o,c,l,u),grid:c,length:e,mines:n,shape:o}},k=n(13),G=n.n(k),C=n(26),A=n.n(C),M=function(e){return r.a.createElement("div",{className:A.a.container,onClick:e.onNewGame},"New game")},I=n(16),S=n.n(I),F=n(10),X=n.n(F);var D=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(x.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){return n.props.onClick(n.props.boxId)},n.handleContextMenu=function(e){return e.preventDefault()},n.handleMouseDown=function(e){2===e.button&&n.props.toggleBoxFlag(n.props.boxId)},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.box,n=e.onClick,a=e.toggleBoxFlag;return r.a.createElement("div",Object.assign({onClick:n?this.handleClick:void 0,onContextMenu:this.handleContextMenu,onMouseDown:!t.visible&&a?this.handleMouseDown:void 0},function(e){if(e.mined&&e.visible)return{className:X.a.mined,children:r.a.createElement("i",{className:"fas fa-bomb"})};if(e.visible){var t=e.adjacentMinesCount;return{className:X.a.visible,children:t>0&&t}}return e.flagged?{className:X.a.flagged,children:r.a.createElement("i",{className:"fas fa-flag"})}:{className:X.a.hidden}}(t)))}}]),t}(r.a.Component),T=Object(c.b)(function(e,t){return{box:e.game.dashboard.boxes[t.boxId]}})(D),L=function(e){var t=e.dashboard,n=e.onBoxClick,a=e.toggleBoxFlag;return r.a.createElement("div",{className:S.a.container},t&&t.grid.map(function(e,t){return r.a.createElement("div",{className:S.a.row,key:t},e.map(function(e){return r.a.createElement(T,{key:e,boxId:e,onClick:n,toggleBoxFlag:a})}))}))};L.defaultProps={dashboard:null};var R=L,W=n(17),Y=n.n(W),J={active:"",over:"You clicked a mine! Game is over :( Start a new game!",won:"You passed over all mines! :) Start a new game!"},K=function(e){var t=e.status;return r.a.createElement("div",{className:t in Y.a?Y.a[t]:""},t in J?J[t]:"Game status")},H=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(x.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).createNewGame=function(){n.props.createGame(20,5,8)},n.handleBoxClick=function(e){var t=n.props.boxes;if(!t[e].flagged)return t[e].mined?(n.props.showBoxes([e]),void n.props.loseGame()):void n.props.showBoxes(n.recursiveBoxIds([],e))},n.toggleBoxFlag=function(e){n.props.boxes[e].flagged?n.props.unflagBox(e):n.props.flagBox(e)},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){0===this.props.game.status.length&&this.createNewGame()}},{key:"componentDidUpdate",value:function(){var e=this.props.game,t=e.dashboard,n=e.hidden;"active"===e.status&&t.mines===n&&this.props.winGame()}},{key:"recursiveBoxIds",value:function(e,t){var n=this,a=this.props.boxes;return e.push(t),a[t].adjacents.reduce(function(e,t){return a[t].mined||a[t].visible||e.includes(t)?e:n.recursiveBoxIds(e,t)},e)}},{key:"render",value:function(){var e=this.props.game,t=e.dashboard,n=e.status,a="active"===n,o=a?this.handleBoxClick:void 0,s=a?this.toggleBoxFlag:void 0;return r.a.createElement("div",{className:G.a.container},r.a.createElement("div",{className:G.a.status},r.a.createElement("p",null,"Click to open a box"),r.a.createElement("p",null,"Right click to flag/unflag a box"),r.a.createElement(M,{onNewGame:this.createNewGame}),r.a.createElement(K,{status:n})),r.a.createElement("div",{className:G.a.dashboard},r.a.createElement(R,{dashboard:t,onBoxClick:o,toggleBoxFlag:s})))}}]),t}(r.a.Component),U={createGame:function(e,t,n){return{type:"CREATE_GAME",payload:{dashboard:B(e,t,n),flags:0,hidden:e}}},flagBox:function(e){return{type:"FLAG_BOX",payload:{boxId:e}}},loseGame:function(){return{type:"LOSE_GAME"}},showBoxes:function(e){return{type:"SHOW_BOXES",payload:{boxIds:e}}},unflagBox:function(e){return{type:"UNFLAG_BOX",payload:{boxId:e}}},winGame:function(){return{type:"WIN_GAME"}}},P=Object(c.b)(function(e){return{boxes:e.game.dashboard&&e.game.dashboard.boxes,game:e.game}},U)(H),V=n(27),q=n.n(V),z=function(){return r.a.createElement("div",{className:q.a.container},"Settings")},Q=function(e){function t(){return Object(b.a)(this,t),Object(x.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:j.a.container},r.a.createElement("header",null,r.a.createElement("h1",null,"Minesweeper")),r.a.createElement("main",{className:j.a.content},r.a.createElement("div",{className:j.a.settings},r.a.createElement(z,null)),r.a.createElement("div",{className:j.a.game},r.a.createElement(P,null))))}}]),t}(a.Component);s.a.render(r.a.createElement(c.a,{store:v},r.a.createElement(Q,null)),document.getElementById("root"))},9:function(e,t,n){e.exports={container:"App_container__AVaq6",content:"App_content__1KDwk",settings:"App_settings__3ywE_",game:"App_game__-kgPd"}}},[[28,2,1]]]);
//# sourceMappingURL=main.002c7759.chunk.js.map